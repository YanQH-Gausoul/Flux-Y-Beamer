% Copyright (c) 2023 by Qinghao Yan
% https://github.com/YanQH-Gausoul/Flux-Y-Beamer
%
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
%
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You can find the GNU General Public License at <http://www.gnu.org/licenses/>.

\mode<presentation>

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Disclaimer: the "%" symbols inside hbox are all very important here.
% The \hbox enviroment will insert spaces whenever there's whitespace
% Adding a % at the END of each line ensures that any hard returns aren't
% interpreted as white space. This allows the color boxes to be flush against
% one another. If a faint white line appears one could probably do something like
% hspace{-1px} and add an additional pixel-or-two wide beamercolorbox.	
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Header
\setbeamertemplate{frametitle}
{
	\vspace{0.1cm}
	% --------------------------------------------------------------------------
	%  section title and logos
    \begin{beamercolorbox}[wd=\paperwidth,leftskip=0.2cm,ht=0.5cm,dp=0.25cm]{header primary}%
		\usebeamerfont{header title}\insertframetitle
		\hspace*{0.1cm} % set the space between title and subtitle
		{\usebeamercolor*[fg]{header title}\usebeamerfont{header subtitle}\insertframesubtitle}
        \hfill
    	\begin{beamercolorbox}[wd=0.2\paperheight,ht=0.5cm,dp=0.25cm, center]{header secondary}%
			% Logo vertical align, change space. 
			\hspace{-1.8cm}
			\begin{tikzpicture}[remember picture,overlay]
				\node[anchor=center] at (0.4,0.12) {\pgfuseimage{FramePageLogo1}};
				\node[anchor=center] at (1.2,0.12) {\pgfuseimage{FramePageLogo2}};
			\end{tikzpicture}
		\end{beamercolorbox}%
    \end{beamercolorbox}%
}
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Footer
\setbeamertemplate{footline}
{%
\begin{beamercolorbox}[wd=\textwidth, center]{footer}%
	\rule{0.95\paperwidth}{0.2pt}
\end{beamercolorbox}%
\begin{beamercolorbox}[wd=\textwidth, leftskip=0.3cm,rightskip=0.3cm, ht=0.3cm,dp=0.15cm]{footer text}%

	% \usebeamerfont{footnote}\copyright \insertauthor \hfill
	\usebeamerfont{footnote}\copyright\, Q. Yan, P. H. Diamond, R. Ma \hfill
	% Uncomment to display navigation button
	%\insertslidenavigationsymbol%
	%\insertframenavigationsymbol%
	%\insertsubsectionnavigationsymbol%
	%\insertsectionnavigationsymbol%
	%\insertdocnavigationsymbol%
	%\insertbackfindforwardnavigationsymbol%
	\hspace{-1.5cm}\inserttitle	
	\hfill\insertframenumber\,/\,\inserttotalframenumber%
\end{beamercolorbox}%
}
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Custom footnote
\hfuzz=\maxdimen 
\renewcommand\footnoterule{\color{Gray!50}\hspace*{-0.5cm}\rule{0.95\paperwidth}{0.2pt}\vspace*{0.07cm}}
\setbeamertemplate{footnote}{
	\begin{beamercolorbox}[wd=\textwidth, leftskip=0.3cm,rightskip=0.3cm]{footer text}%
	\usebeamerfont{footnote}\insertfootnotemark\insertfootnotetext
	\end{beamercolorbox}%
}
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Title Page
\def\titlepage{\usebeamertemplate{title page}}

\tikzset{
  sider/.style={
    draw=none,
    rectangle,
    outer xsep=-0.1mm,
    minimum height=\paperheight,
    minimum width=0.8cm,
    fill=primaryLight
  },
  icon/.style={
  	draw=none,
  	fill=none, % white logo use: primaryLight!95
  	minimum height=0.2\paperheight,
  	minimum width=0.2\paperwidth,
  	text=background,
  	outer xsep=0.4cm,
  	outer ysep=0.4cm,
  	inner sep=0.3cm,
  	%rounded corners=0.1\paperheight
  }
}
\setbeamertemplate{title page}
{
	\begin{frame}[plain]
    		\begin{tikzpicture}[remember picture,overlay]
    			\hspace*{-0.2cm}
			\node[anchor=west,sider] at (current page.west){};
    		\node[anchor=south west,sider, fill=primary, minimum height=0.3\paperheight] at (current page.south west){};
			\node[align=flush center, text width=0.7\paperwidth, yshift=0.15cm] at (current page.center){
				\usebeamerfont{title}\color{primary}\inserttitle\\[0.2cm]
				\usebeamerfont{subtitle}\color{Gray!90!black}\insertsubtitle\\[0cm]
				{\small\color{Gray!90}\insertdate}\\[-0.3cm]
				\usebeamercolor[fg]{footer}\rule{0.7\paperwidth}{0.2pt}	\\[0.25cm]
				\usebeamerfont{author}\color{Gray}\insertauthor\\[0.15cm]
  			 \usebeamerfont{institute}\color{Gray}\insertinstitute
			};
			%\node[anchor=south,outer ysep=0.4cm] at (current page.south){\small\color{Gray!90}\insertdate};
			\node[anchor=south, icon, xshift=-1.50cm, yshift=0cm] at (current page.south)(logo1){\pgfuseimage{FrontPageLogo1}};
			% second logo: location is relative to the first logo
			\node[anchor=west, icon, xshift=1cm] at (logo1.center) (logo2){\pgfuseimage{FrontPageLogo2}};
		\end{tikzpicture}
	\end{frame}
}
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\mode<all>

